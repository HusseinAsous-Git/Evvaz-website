<app-admin-header></app-admin-header>
<app-admin-sidebar></app-admin-sidebar>

<div class="container">
<nav class="">
  <ul class="breadcrumb ">
    <li class="breadcrumb-item">
      <a [routerLink]="['/admin']">Dashboard</a>
    </li>

    <li class="breadcrumb-item">
      <a [routerLink]="['/admin','tenders','mine']">Tenders</a>
    </li>
    <li class="breadcrumb-item active">
      Edit
    </li>
  </ul>
</nav>
 
      <!-- new tender form here -->
      <div class="col-sm-8 col-sm offset-2">
        <form class="mt-5" [formGroup]="editTenderForm" (ngSubmit)="editTender()">
          <div class="form-group">
            <label for="tenderName">Tender Name</label>
            <input type="text"
             class="form-control"
              id="tenderName"
                placeholder="Tender name"
                formControlName="tenderName"  
               
                >
          </div>
          <span 
                *ngIf="!editTenderForm.get('tenderName').valid && editTenderForm.get('tenderName').touched"
                class="help-block" >Tender name Required!</span>
<br>

                <!-- Category dropdown here -->

                <!-- <div class="form-group">
                  <label for="category">Tender Category</label>
                  <select id="category" formControlName="category" class="form-control">
                    <option disabled="disabled" [selected]="true" [ngValue]="categoryName">Select a category..</option>
                    <option *ngFor="let category of categories  , let i = index" value="{{category.category_name}}">{{category.category_name}}</option>
                  </select>
                </div> -->
               
          
                  <!-- check boxes -->
                  <label for="" style="color: #12a5e1">Category</label>
                  <div class="row ml-1">
                <div class=" col-sm-4"  *ngFor="let category of categories  , let i = index">
                  <label class="form-check-label"  style="color: gray;">
                    <input type="checkbox" class="form-check-input" (change)="hasChecked($event, category, i)" value="{{category.category_name}}" style="color: gray; width: 1rem; height: 1rem;" formControlName="category">{{category.category_name}}
                  </label>
                </div>
              </div>
              <span 
              *ngIf="!editTenderForm.get('category').valid && editTenderForm.get('category').touched"
              class="help-block" >This feild is required!</span>
                <!-- end check boxes -->
<br>  
                <div class="form-group">
                  <label for="description">Description</label>
                  <textarea class="form-control"
                  id="description" 
                  rows="3" 
                  placeholder="Tender description"
                  formControlName="description"
                  ></textarea>
                </div>
         
                <span 
                *ngIf="!editTenderForm.get('description').valid && editTenderForm.get('description').touched"
                class="help-block" >This feild is required!</span>
  
                <br>
                <label for="#" style="color: black; font-weight: bold">School TimeFrime</label>
                <hr>
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="schoolfromdate">From</label>
                      <input type="date"
                       class="form-control"
                        id="schoolfromdate"
                          
                          formControlName="schoolfromdate"
                         
                          >
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="schoolstartTime">Time from</label>
                      <input type="text" formControlName="schoolstartTime"  id="schoolstartTime"
          apt-time-picker class="form-control"
           placeholder="start time" #schoolstartTime 
           (click)="setSchoolStartTime()">
                    </div>
                  </div>
                </div>
         
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="schooltodate">To</label>
                      <input type="date"
                       class="form-control"
                        id="schooltodate"
                          
                          formControlName="schooltodate"
                         
                          >
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="schooltimeto">Time to</label>
                      <input type="text" id="schooltimeto"
           formControlName="schoolendTime" 
           class="form-control" 
           placeholder="end time" 
           apt-time-picker #schoolendTime
            (click)="setSchoolEndTime()" >
                    </div>
                  </div>
                </div>
            
                <br>

               <label for="#" style="color: black; font-weight: bold">Company TimeFrime</label>
                <hr>
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="companyfromdate">From</label>
                      <input type="date"
                       class="form-control"
                        id="companyfromdate"
                          
                          formControlName="companyfromdate"
                         
                          >
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="companystartTime">Time from</label>
                      <input type="text" formControlName="companystartTime"  id="companystartTime"
          apt-time-picker class="form-control"
           placeholder="start time" #companystartTime 
           (click)="setCompanyStartTime()">
                    </div>
                  </div>
                </div>
         
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="companytodate">To</label>
                      <input type="date"
                       class="form-control"
                        id="companytodate"
                          
                          formControlName="companytodate"
                         
                          >
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="companytimeto">Time to</label>
                      <input type="text" id="companytimeto"
           formControlName="companyendTime" 
           class="form-control" 
           placeholder="end time" 
           apt-time-picker #companyendTime
            (click)="setCompanyEndTime()" >
                    </div>
                  </div>
                </div>


              
                <button class="btn btn-danger ml-2 pull-right" [routerLink]="['/admin','tenders',tender.tender_id,'company']">Cancel</button>
            <button class="btn btn-success ml-2 pull-right" type="submit" [disabled]="!editTenderForm.valid">Save</button>
            
            
          
        </form>
      </div>
</div>

<button type="button" [hidden]="true" class="btn btn-primary" id="openModalButton" data-toggle="modal" data-target="#exampleModal">
  </button>
  
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Creation Failed</h5>
          <button type="button" class="close ps-Close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          {{errMessage}}
        </div>
        <div *ngIf="catsExist">
        <p class="justify-content-center">These Categories already in use!, choose another</p>
        <ul *ngFor="let cat of cats">
          <li>{{cat}}</li>
        </ul>
      </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>


  